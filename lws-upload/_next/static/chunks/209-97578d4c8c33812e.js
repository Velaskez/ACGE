"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{285:(e,t,s)=>{s.d(t,{$:()=>o,r:()=>l});var a=s(5155);s(2115);var r=s(9708),n=s(2085),i=s(9434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:s,size:n,asChild:o=!1,...c}=e,d=o?r.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,i.cn)(l({variant:s,size:n,className:t})),...c})}},2346:(e,t,s)=>{s.d(t,{w:()=>i});var a=s(5155);s(2115);var r=s(7489),n=s(9434);function i(e){let{className:t,orientation:s="horizontal",decorative:i=!0,...l}=e;return(0,a.jsx)(r.b,{"data-slot":"separator",decorative:i,orientation:s,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...l})}},2523:(e,t,s)=>{s.d(t,{p:()=>n});var a=s(5155);s(2115);var r=s(9434);function n(e){let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},3597:(e,t,s)=>{s.d(t,{k:()=>r});var a=s(2115);function r(){let[e,t]=(0,a.useState)(null),[s,r]=(0,a.useState)([]),[n,i]=(0,a.useState)(!0),[l,o]=(0,a.useState)(null),c=async()=>{try{var e;i(!0);let[s,a]=await Promise.all([fetch("/api/dashboard/stats",{credentials:"include"}),fetch("/api/sidebar/folders",{credentials:"include"})]);if(401===s.status){t({totalDocuments:0,totalFolders:0,spaceUsed:{gb:0}}),r([]),o(null);return}if(!s.ok){let e=await s.text();throw console.error("Stats API error:",s.status,e),Error("Erreur lors de la r\xe9cup\xe9ration des statistiques: ".concat(s.status))}let n=await s.json();if(t({totalDocuments:n.totalDocuments,totalFolders:n.totalFolders,spaceUsed:{gb:(null==(e=n.spaceUsed)?void 0:e.gb)||0}}),a.ok){let e=await a.json();r(e.folders||[])}else r([]);o(null)}catch(e){console.error("Erreur sidebar:",e),o(e instanceof Error?e.message:"Erreur inconnue"),t({totalDocuments:0,totalFolders:0,spaceUsed:{gb:0}}),r([])}finally{i(!1)}};return(0,a.useEffect)(()=>{c()},[]),{stats:e,folders:s,isLoading:n,error:l,refresh:c}}},4379:(e,t,s)=>{s.d(t,{O:()=>Y});var a=s(5155),r=s(2115),n=s(8382),i=s(7600),l=s(4783),o=s(7924),c=s(1007),d=s(381),u=s(4835),m=s(4416),x=s(6766),h=s(285),f=s(2523),p=s(4838),v=s(4011),g=s(9434);function j(e){let{className:t,...s}=e;return(0,a.jsx)(v.bL,{"data-slot":"avatar",className:(0,g.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...s})}function b(e){let{className:t,...s}=e;return(0,a.jsx)(v._V,{"data-slot":"avatar-image",className:(0,g.cn)("aspect-square size-full",t),...s})}function N(e){let{className:t,...s}=e;return(0,a.jsx)(v.H4,{"data-slot":"avatar-fallback",className:(0,g.cn)("bg-muted flex size-full items-center justify-center rounded-full",t),...s})}var w=s(6126),y=s(7655);function k(e){let{className:t,children:s,...r}=e;return(0,a.jsxs)(y.bL,{"data-slot":"scroll-area",className:(0,g.cn)("relative",t),...r,children:[(0,a.jsx)(y.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),(0,a.jsx)(A,{}),(0,a.jsx)(y.OK,{})]})}function A(e){let{className:t,orientation:s="vertical",...r}=e;return(0,a.jsx)(y.VM,{"data-slot":"scroll-area-scrollbar",orientation:s,className:(0,g.cn)("flex touch-none p-px transition-colors select-none","vertical"===s&&"h-full w-2.5 border-l border-l-transparent","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent",t),...r,children:(0,a.jsx)(y.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var C=s(2346),E=s(6516),S=s(7434),z=s(133),D=s(5339),_=s(663),I=s(3861),O=s(437),T=s(1154),M=s(5196);function R(e){let{className:t}=e,[s,n]=(0,r.useState)([]),[i,l]=(0,r.useState)(0),[o,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{m&&f()},[m]),(0,r.useEffect)(()=>{let e=setInterval(()=>{v()},3e4);return v(),()=>clearInterval(e)},[]);let f=async()=>{try{u(!0);let e=await fetch("/api/notifications?limit=10");if(e.ok){let t=await e.json();n(t.notifications||[]),l(t.unreadCount||0)}}catch(e){console.error("Erreur lors du chargement des notifications:",e)}finally{u(!1)}},v=async()=>{try{let e=await fetch("/api/notifications?unreadOnly=true&limit=1");if(e.ok){let t=await e.json();l(t.unreadCount||0)}}catch(e){console.error("Erreur lors du chargement du compteur:",e)}},j=async e=>{try{(await fetch("/api/notifications/".concat(e,"/read"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isRead:!0})})).ok&&(n(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t)),l(e=>Math.max(0,e-1)))}catch(e){console.error("Erreur lors du marquage:",e)}},b=async()=>{try{(await fetch("/api/notifications/mark-all-read",{method:"PUT"})).ok&&(n(e=>e.map(e=>({...e,isRead:!0}))),l(0))}catch(e){console.error("Erreur lors du marquage global:",e)}},N=async e=>{var t;e.isRead||await j(e.id),(null==(t=e.data)?void 0:t.documentId)&&(window.location.href="/documents?view=".concat(e.data.documentId))};return(0,a.jsxs)(p.rI,{open:m,onOpenChange:x,children:[(0,a.jsx)(p.ty,{asChild:!0,children:(0,a.jsx)(h.$,{variant:"ghost",size:"icon",className:t,children:(0,a.jsxs)("div",{className:"relative",children:[i>0?(0,a.jsx)(_.A,{className:"h-4 w-4"}):(0,a.jsx)(I.A,{className:"h-4 w-4"}),i>0&&(0,a.jsx)(w.E,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center text-xs",children:i>99?"99+":i})]})})}),(0,a.jsxs)(p.SQ,{align:"end",className:"w-80",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,a.jsx)(p.lp,{children:"Notifications"}),i>0&&(0,a.jsxs)(h.$,{variant:"ghost",size:"sm",onClick:b,className:"text-xs",children:[(0,a.jsx)(O.A,{className:"h-3 w-3 mr-1"}),"Tout marquer comme lu"]})]}),(0,a.jsx)(C.w,{}),(0,a.jsx)(k,{className:"h-96",children:o?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:"Chargement..."})]}):0===s.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,a.jsx)(I.A,{className:"h-8 w-8 text-muted-foreground mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aucune notification"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Vous \xeates \xe0 jour !"})]}):(0,a.jsx)("div",{className:"space-y-1 p-1",children:s.map(e=>(0,a.jsx)("div",{className:"p-3 rounded-lg cursor-pointer transition-colors hover:bg-muted/50 ".concat(e.isRead?"":"bg-blue-50 border-l-2 border-l-blue-500"),onClick:()=>N(e),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(e=>{switch(e){case"DOCUMENT_SHARED":return(0,a.jsx)(E.A,{className:"h-4 w-4 text-blue-500"});case"VERSION_ADDED":return(0,a.jsx)(S.A,{className:"h-4 w-4 text-green-500"});case"VERSION_RESTORED":return(0,a.jsx)(z.A,{className:"h-4 w-4 text-orange-500"});case"WELCOME":return(0,a.jsx)(c.A,{className:"h-4 w-4 text-purple-500"});case"SYSTEM":return(0,a.jsx)(d.A,{className:"h-4 w-4 text-gray-500"});default:return(0,a.jsx)(D.A,{className:"h-4 w-4 text-gray-500"})}})(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium truncate ".concat(e.isRead?"text-gray-700":"text-gray-900"),children:e.title}),!e.isRead&&(0,a.jsx)(h.$,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),j(e.id)},className:"h-auto p-1 opacity-0 group-hover:opacity-100",children:(0,a.jsx)(M.A,{className:"h-3 w-3"})})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:(0,g.fw)(e.createdAt.toString())})]})]})},e.id))})}),s.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.w,{}),(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(h.$,{variant:"ghost",className:"w-full text-sm",onClick:()=>window.location.href="/notifications",children:"Voir toutes les notifications"})})]})]})]})}function P(e){var t,s;let{onOpenMenu:n}=e,{user:v,logout:g}=(0,i.A)(),[w,y]=(0,r.useState)(""),[k,A]=(0,r.useState)(!1),C=e=>{e.preventDefault(),w.trim()&&(window.location.href="/documents?search=".concat(encodeURIComponent(w.trim())))};return(0,a.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background border-b",children:(0,a.jsxs)("div",{className:"relative flex h-16 items-center px-2 sm:px-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4 ".concat(k?"opacity-0 pointer-events-none sm:opacity-100 sm:pointer-events-auto":""),children:[(0,a.jsx)(h.$,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>null==n?void 0:n(),"aria-label":"Ouvrir le menu",children:(0,a.jsx)(l.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(x.default,{src:"/Tr\xe9sorPublicGabon.jpg",alt:"Tr\xe9sor Public Gabon",width:40,height:40,className:"rounded-lg object-contain shadow-sm sm:w-12 sm:h-12"}),(0,a.jsx)("h1",{className:"text-lg sm:text-xl font-semibold text-[#134074]",children:"ACGE"})]})]}),(0,a.jsx)("div",{className:"pointer-events-auto hidden sm:block absolute left-1/2 -translate-x-1/2 w-full max-w-md",children:(0,a.jsxs)("form",{onSubmit:C,className:"relative",children:[(0,a.jsx)(o.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(f.p,{type:"search",placeholder:"Rechercher...",className:"pl-8",value:w,onChange:e=>y(e.target.value)})]})}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-2 sm:gap-4 ".concat(k?"opacity-0 pointer-events-none sm:opacity-100 sm:pointer-events-auto":""),children:[(0,a.jsx)(h.$,{variant:"ghost",size:"icon",className:"sm:hidden",onClick:()=>A(!0),"aria-label":"Rechercher",children:(0,a.jsx)(o.A,{className:"h-5 w-5"})}),(0,a.jsx)(R,{}),v&&(0,a.jsxs)(p.rI,{children:[(0,a.jsx)(p.ty,{asChild:!0,children:(0,a.jsx)(h.$,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:(0,a.jsxs)(j,{className:"h-8 w-8",children:[(0,a.jsx)(b,{src:"",alt:v.name||""}),(0,a.jsx)(N,{children:(null==(t=v.name)?void 0:t.charAt(0).toUpperCase())||(null==(s=v.email)?void 0:s.charAt(0).toUpperCase())})]})})}),(0,a.jsxs)(p.SQ,{className:"w-56",align:"end",forceMount:!0,children:[(0,a.jsx)(p.lp,{className:"font-normal",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:v.name}),(0,a.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:v.email})]})}),(0,a.jsx)(p.mB,{}),(0,a.jsxs)(p._2,{onClick:()=>window.location.href="/profile",children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Profil"})]}),(0,a.jsxs)(p._2,{children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Param\xe8tres"})]}),(0,a.jsx)(p.mB,{}),(0,a.jsxs)(p._2,{onClick:()=>g(),children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Se d\xe9connecter"})]})]})]})]}),k&&(0,a.jsx)("div",{className:"sm:hidden absolute inset-x-2 z-10",children:(0,a.jsxs)("form",{onSubmit:e=>{C(e),A(!1)},className:"relative",children:[(0,a.jsx)(o.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(f.p,{autoFocus:!0,type:"search",placeholder:"Rechercher...",className:"pl-8 pr-8",value:w,onChange:e=>y(e.target.value)}),(0,a.jsx)(h.$,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1.5 top-1.5 h-7 w-7",onClick:()=>A(!1),"aria-label":"Fermer la recherche",children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})]})})]})})}var U=s(6874),F=s.n(U),$=s(5695),B=s(3597),L=s(8856),V=s(6102),q=s(7340),Z=s(9869),X=s(4395),G=s(7580),Q=s(4616),H=s(6474),J=s(3052);let K=[{title:"Tableau de bord",href:"/dashboard",icon:q.A},{title:"Mes fichiers",href:"/documents",icon:S.A},{title:"Upload",href:"/upload",icon:Z.A},{title:"Dossiers",href:"/folders",icon:X.A},{title:"Utilisateurs",href:"/users",icon:G.A,adminOnly:!0},{title:"Param\xe8tres",href:"/settings",icon:d.A}];function W(e){var t,s,n;let{className:l,inSheet:o=!1}=e,c=(0,$.usePathname)(),{user:d}=(0,i.A)(),{stats:u,folders:m,isLoading:x}=(0,B.k)(),[f,p]=(0,r.useState)([]),v=K.filter(e=>!e.adminOnly||(null==d?void 0:d.role)==="ADMIN");return(0,a.jsx)(V.Bc,{children:(0,a.jsx)("div",{className:(0,g.cn)(o?"relative inset-0 z-40 bg-background border-r flex flex-col h-full w-full":"fixed left-0 top-16 bottom-0 z-40 bg-background border-r flex flex-col w-64 min-w-[240px] max-w-[320px] sm:w-64 md:w-72 lg:w-80",l),children:(0,a.jsx)("div",{className:"flex flex-col h-full overflow-hidden",children:(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"px-3 py-2",children:[(0,a.jsx)("h2",{className:"mb-2 px-4 text-lg font-semibold tracking-tight truncate",children:"Navigation"}),(0,a.jsx)("div",{className:"space-y-1",children:v.map(e=>(0,a.jsx)(F(),{href:e.href,children:(0,a.jsxs)(V.m_,{children:[(0,a.jsx)(V.k$,{asChild:!0,children:(0,a.jsxs)(h.$,{variant:c===e.href?"secondary":"ghost",className:"w-full justify-start min-h-[40px]",children:[(0,a.jsx)(e.icon,{className:"mr-2 h-4 w-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate text-left flex-1",children:e.title})]})}),(0,a.jsx)(V.ZI,{side:"right",className:"max-w-[200px]",children:(0,a.jsx)("p",{children:e.title})})]})},e.href))})]}),(0,a.jsx)(C.w,{}),(0,a.jsxs)("div",{className:"px-3 py-2 flex-1 min-h-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2 px-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold tracking-tight truncate flex-1",children:"Dossiers r\xe9cents"}),(0,a.jsx)(h.$,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",children:(0,a.jsx)(Q.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"px-1 max-h-[300px] overflow-y-auto",children:(0,a.jsx)("div",{className:"space-y-1",children:x?Array.from({length:4}).map((e,t)=>(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-2",children:[(0,a.jsx)(L.E,{className:"h-4 w-4 flex-shrink-0"}),(0,a.jsx)(L.E,{className:"h-4 w-4 flex-shrink-0"}),(0,a.jsx)(L.E,{className:"h-4 flex-1"})]})},t)):m.length>0?m.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)(V.m_,{children:[(0,a.jsx)(V.k$,{asChild:!0,children:(0,a.jsxs)(h.$,{variant:"ghost",className:"w-full justify-start h-8 min-h-[32px]",onClick:()=>{var t;return t=e.id,void p(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},children:[f.includes(e.id)?(0,a.jsx)(H.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}):(0,a.jsx)(J.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}),(0,a.jsx)(X.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"flex-1 text-left truncate min-w-0",children:e.name}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground flex-shrink-0 ml-2",children:e.documentCount})]})}),(0,a.jsxs)(V.ZI,{side:"right",className:"max-w-[250px]",children:[(0,a.jsx)("p",{className:"break-words",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[e.documentCount," document",e.documentCount>1?"s":""]})]})]}),f.includes(e.id)&&(0,a.jsx)("div",{className:"ml-6 space-y-1",children:e.recentDocuments.length>0?e.recentDocuments.map(e=>(0,a.jsxs)(V.m_,{children:[(0,a.jsx)(V.k$,{asChild:!0,children:(0,a.jsxs)(h.$,{variant:"ghost",className:"w-full justify-start h-6 text-sm min-h-[24px]",children:[(0,a.jsx)(S.A,{className:"mr-2 h-3 w-3 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate text-left flex-1 min-w-0",children:e.title})]})}),(0,a.jsx)(V.ZI,{side:"right",className:"max-w-[250px]",children:(0,a.jsx)("p",{className:"break-words",children:e.title})})]},e.id)):(0,a.jsx)("div",{className:"text-xs text-muted-foreground px-2 py-1 truncate",children:"Aucun document"})})]},e.id)):(0,a.jsxs)("div",{className:"text-center py-4 px-2",children:[(0,a.jsx)(X.A,{className:"mx-auto h-8 w-8 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2 break-words",children:"Aucun dossier"})]})})})]}),(0,a.jsx)(C.w,{}),(0,a.jsxs)("div",{className:"px-3 py-2 flex-shrink-0",children:[(0,a.jsx)("h2",{className:"mb-2 px-4 text-lg font-semibold tracking-tight truncate",children:"Statistiques"}),(0,a.jsx)("div",{className:"space-y-2 px-4",children:x?Array.from({length:3}).map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm min-h-[20px]",children:[(0,a.jsx)(L.E,{className:"h-4 w-16 flex-shrink-0"}),(0,a.jsx)(L.E,{className:"h-4 w-12 flex-shrink-0"})]},t)):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm min-h-[20px]",children:[(0,a.jsx)("span",{className:"truncate flex-1 mr-2",children:"Fichiers"}),(0,a.jsx)("span",{className:"font-medium flex-shrink-0",children:(null==u||null==(t=u.totalDocuments)?void 0:t.toLocaleString())||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm min-h-[20px]",children:[(0,a.jsx)("span",{className:"truncate flex-1 mr-2",children:"Espace utilis\xe9"}),(0,a.jsx)("span",{className:"font-medium flex-shrink-0",children:(null==u||null==(s=u.spaceUsed)?void 0:s.gb)?"".concat(u.spaceUsed.gb," GB"):"0 GB"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm min-h-[20px]",children:[(0,a.jsx)("span",{className:"truncate flex-1 mr-2",children:"Dossiers"}),(0,a.jsx)("span",{className:"font-medium flex-shrink-0",children:(null==u||null==(n=u.totalFolders)?void 0:n.toLocaleString())||0})]})]})})]})]})})})})})}function Y(e){let{children:t}=e,[s,i]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(P,{onOpenMenu:()=>i(!0)}),(0,a.jsx)(n.cj,{open:s,onOpenChange:i,children:(0,a.jsx)(n.h,{side:"left",className:"w-[280px] max-w-[90vw] p-0 sm:w-[320px]",children:(0,a.jsx)(W,{className:"border-r-0",inSheet:!0})})}),(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)(W,{})}),(0,a.jsx)("main",{className:"pt-16 min-h-screen transition-all duration-200 md:ml-64 lg:ml-72 xl:ml-80",children:(0,a.jsx)("div",{className:"p-3 w-full sm:p-6",children:(0,a.jsx)("div",{className:"max-w-full overflow-x-hidden",children:t})})})]})}},4838:(e,t,s)=>{s.d(t,{SQ:()=>o,_2:()=>c,lp:()=>d,mB:()=>u,rI:()=>i,ty:()=>l});var a=s(5155);s(2115);var r=s(9449),n=s(9434);function i(e){let{...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"dropdown-menu",...t})}function l(e){let{...t}=e;return(0,a.jsx)(r.l9,{"data-slot":"dropdown-menu-trigger",...t})}function o(e){let{className:t,sideOffset:s=4,...i}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsx)(r.UC,{"data-slot":"dropdown-menu-content",sideOffset:s,className:(0,n.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...i})})}function c(e){let{className:t,inset:s,variant:i="default",...l}=e;return(0,a.jsx)(r.q7,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":i,className:(0,n.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l})}function d(e){let{className:t,inset:s,...i}=e;return(0,a.jsx)(r.JU,{"data-slot":"dropdown-menu-label","data-inset":s,className:(0,n.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...i})}function u(e){let{className:t,...s}=e;return(0,a.jsx)(r.wv,{"data-slot":"dropdown-menu-separator",className:(0,n.cn)("bg-border -mx-1 my-1 h-px",t),...s})}},6102:(e,t,s)=>{s.d(t,{Bc:()=>i,ZI:()=>c,k$:()=>o,m_:()=>l});var a=s(5155);s(2115);var r=s(9613),n=s(9434);function i(e){let{delayDuration:t=0,...s}=e;return(0,a.jsx)(r.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function l(e){let{...t}=e;return(0,a.jsx)(i,{children:(0,a.jsx)(r.bL,{"data-slot":"tooltip",...t})})}function o(e){let{...t}=e;return(0,a.jsx)(r.l9,{"data-slot":"tooltip-trigger",...t})}function c(e){let{className:t,sideOffset:s=0,children:i,...l}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{"data-slot":"tooltip-content",sideOffset:s,className:(0,n.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...l,children:[i,(0,a.jsx)(r.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},6126:(e,t,s)=>{s.d(t,{E:()=>o});var a=s(5155);s(2115);var r=s(9708),n=s(2085),i=s(9434);let l=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,asChild:n=!1,...o}=e,c=n?r.DX:"span";return(0,a.jsx)(c,{"data-slot":"badge",className:(0,i.cn)(l({variant:s}),t),...o})}},6695:(e,t,s)=>{s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>d});var a=s(5155);s(2115);var r=s(9434);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",t),...s})}},7600:(e,t,s)=>{s.d(t,{A:()=>o,O:()=>l});var a=s(5155),r=s(2115),n=s(5695);let i=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,r.useState)(null),[o,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(!1),m=(0,n.useRouter)();(0,r.useEffect)(()=>{let e=setTimeout(()=>{x()},0);return()=>clearTimeout(e)},[]);let x=async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();l(t.user)}}catch(e){console.error("Erreur lors de la v\xe9rification de l'authentification:",e)}finally{c(!1),u(!0)}},h=async(e,t)=>{try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(s.ok){let e=await s.json();return l(e.user),!0}return!1}catch(e){return console.error("Erreur lors de la connexion:",e),!1}},f=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),l(null),m.push("/login")}catch(e){console.error("Erreur lors de la d\xe9connexion:",e)}},p=async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();l(t.user)}}catch(e){console.error("Erreur lors du rafra\xeechissement des donn\xe9es utilisateur:",e)}};return(0,a.jsx)(i.Provider,{value:{user:s,isLoading:o,login:h,logout:f,refreshUser:p},children:t})}function o(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8382:(e,t,s)=>{s.d(t,{Fm:()=>u,Qs:()=>h,XW:()=>m,cj:()=>l,h:()=>d,qp:()=>x});var a=s(5155);s(2115);var r=s(5452),n=s(4416),i=s(9434);function l(e){let{...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"sheet",...t})}function o(e){let{...t}=e;return(0,a.jsx)(r.ZL,{"data-slot":"sheet-portal",...t})}function c(e){let{className:t,...s}=e;return(0,a.jsx)(r.hJ,{"data-slot":"sheet-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function d(e){let{className:t,children:s,side:l="right",...d}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(r.UC,{"data-slot":"sheet-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===l&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===l&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===l&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===l&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...d,children:[s,(0,a.jsxs)(r.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,a.jsx)(n.A,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"sheet-header",className:(0,i.cn)("flex flex-col gap-1.5 p-4",t),...s})}function m(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"sheet-footer",className:(0,i.cn)("mt-auto flex flex-col gap-2 p-4",t),...s})}function x(e){let{className:t,...s}=e;return(0,a.jsx)(r.hE,{"data-slot":"sheet-title",className:(0,i.cn)("text-foreground font-semibold",t),...s})}function h(e){let{className:t,...s}=e;return(0,a.jsx)(r.VY,{"data-slot":"sheet-description",className:(0,i.cn)("text-muted-foreground text-sm",t),...s})}},8856:(e,t,s)=>{s.d(t,{E:()=>n});var a=s(5155),r=s(9434);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"skeleton",className:(0,r.cn)("bg-accent animate-pulse rounded-md",t),...s})}},9434:(e,t,s)=>{s.d(t,{Hx:()=>o,cn:()=>n,fw:()=>l,v7:()=>i});var a=s(2596),r=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}function i(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB","TB"][t]}function l(e){let t=new Date,s=new Date(e),a=t.getTime()-s.getTime(),r=Math.floor(a/6e4),n=Math.floor(a/36e5),i=Math.floor(a/864e5),l=Math.floor(i/7),o=Math.floor(i/30);return r<1?"\xc0 l'instant":r<60?"Il y a ".concat(r," min"):n<24?"Il y a ".concat(n," heure").concat(n>1?"s":""):i<7?"Il y a ".concat(i," jour").concat(i>1?"s":""):l<4?"Il y a ".concat(l," semaine").concat(l>1?"s":""):o<12?"Il y a ".concat(o," mois"):s.toLocaleDateString("fr-FR")}function o(e){return e.includes("pdf")?"PDF":e.includes("word")||e.includes("document")?"DOCX":e.includes("excel")||e.includes("spreadsheet")?"XLSX":e.includes("powerpoint")||e.includes("presentation")?"PPTX":e.includes("image")?"IMG":e.includes("text")?"TXT":e.includes("video")?"VID":e.includes("audio")?"AUD":"FICHIER"}}}]);